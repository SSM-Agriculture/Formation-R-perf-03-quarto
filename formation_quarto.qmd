---
title: "Formation Quarto"
subtitle: "Parcours de formation R perfectionnement SSP"
date-modified: "`Sys.Date()`"
title-slide-attributes:
  data-background-image: img/jan-kahanek-g3O5ZtRk2E4-unsplash.jpg
  data-background-size: cover
  data-background-opacity: "0.5"
mainfont: Marianne
toc: true
format:
  revealjs:
    incremental: true
    width: 1600
    margin: 0.05
    toc-depth: 1
    theme: [moon, styles/masa.scss]
    logo: img/logo_masa_mail.png
    preview-links: auto
    show-slide-number: all
    slide-number: c/t
  html:
    output-file: formation_quarto_document.html
    self-contained: true
  pdf:
    output-file: formation_quarto_document.pdf
editor_options: 
  chunk_output_type: console
knitr:
  opts_chunk: 
    dev: "ragg_png"
execute: 
  echo: true
bibliography: formation_quarto.bib
lang: fr
csl: styles/biblio.csl
nocite: |
  @*
---

```{r}
#| label: setup

library(ggplot2)

theme_masa <- function(...) {
  theme_grey(...) %+replace%
    theme(
      text = element_text(family = "Marianne"))
}
```


# Objectifs



# Introduction

## Quarto

Un système de publication 

:::: {.columns}

::: {.column width="40%"}
- multi-format
  - HTML (rapports, livres, présentations)
  - PDF
  - Appli web (statique/Shiny) : blog, sites, tableaux de bord
  - MS Word
:::

::: {.column width="60%"}
- multi-langage
  - R
  - Python
  - observable
  - Julia
:::

::: notes
PDF nécessite {tinytex}
:::

::::

----

![Principe de fonctionnement (source RStudio)](img/rstudio-qmd-how-it-works.png){#fig-works}

::: notes
Mélange code et texte
Successeur de Rmarkdown

Latex ou Typst pour le PDF
:::

## Avantages

- intégration avec R
- reproductibilité
- versionnement avec git

::: notes
afficher du code dans le doc
éviter les copier/coller : synchronisation analyse/résultats
:::

## Inconvénients

- syntaxe (markdown)
- génération

::: notes
éditeur WYSIWYG
:::

## Sur CERISE

Un package et un binaire

`quarto check install`  
`quarto check knitr`

# Syntaxe et structure

````
---
title: "Mon document"
author: ""
---

Lorem ipsum *dolor* sit amet, consectetur adipiscing elit,

```{{python}}
1 + 1
```

```{{r}}
a <- 1 + 1
```

sed do `{{r}} a` eiusmod **tempor** incididunt ut labore et dolore magna aliqua

````

## markdown

Un langage balisé simple

[doc](https://quarto.org/docs/authoring/markdown-basics.html)

## chunks

```{{r}}
#| label: mon-chunk
#| warning: false

1+1
```

## YAML

En-tête de configuration

----

::: {.callout-note}
### À vous de jouer

[Exercice 1](exercices/exercices_enonces_quarto.html#doc-simple) : produire un document simple
:::




## Éléments

### Texte

- 2 retours à la ligne pour faire un paragraphe
- `*` ou `_` pour mettre en *\*italique\** ou en **\*\*gras\*\***.
- `[un lien](https://www.example.org/)` → [un lien](https://www.example.org/)


----

### Titres


----

### Listes


----

### Images

`![MASA](img/logo_masa_mail.png)`  

![MASA](img/logo_masa_mail.png "voir le logo"){fig-alt="Logo MASA"}

`![MASA](img/logo_masa_mail.png "voir le logo"){fig-alt="Logo MASA"}`

----

### Renvois

Numérotation automatique

----

### Tableaux


----

### Graphiques


----

### Cartes


----

### Code


```{r}
#| label: fig-iris
#| fig-cap: "Iris"
#| output-location: column

ggplot(iris, aes(Petal.Length, Petal.Width, color = Species)) +
  geom_point() +
  theme_masa()
```

- Taille d'image dans Quarto [@arel-bundockConsistentFiguresQuarto2024]

----



## Citations/bibliographie

Avec Zotero


## Cache

# DSFR

- Typographie Marianne [@servicedinformationdugouvernementCharteGraphiqueLEtat2020] : textes et graphiques
  
  - Installer {ragg}, {systemfonts} et {textshaping}
  - Dans Quarto :
    ```{{r}}
    knitr::opts_chunk$set(dev = "ragg_png")
    ```
    
    ou dans l'en-tête yaml :
    
    ```
    ---
    knitr:
      opts_chunk: 
        dev: "ragg_png"
    ---
    ```

- Couleurs

# Références

