---
title: "Formation Quarto"
subtitle: "Parcours de formation R perfectionnement SSP"
date-modified: "`Sys.Date()`"
title-slide-attributes:
  data-background-image: img/jan-kahanek-g3O5ZtRk2E4-unsplash.jpg
  data-background-size: cover
  data-background-opacity: "0.5"
mainfont: Marianne
toc: true
format:
  revealjs:
    incremental: true
    width: 1600
    margin: 0.05
    toc-depth: 1
    theme: [moon, styles/masa.scss]
    logo: img/logo_masa_mail.png
    preview-links: auto
    show-slide-number: all
    slide-number: c/t
    slide-level: 3
  html:
    output-file: formation_quarto_document.html
    self-contained: true
  pdf:
    output-file: formation_quarto_document.pdf
editor_options: 
  chunk_output_type: console
knitr:
  opts_chunk: 
    dev: "ragg_png"
execute: 
  echo: true
bibliography: formation_quarto.bib
lang: fr
csl: styles/biblio.csl
nocite: |
  @*
---

```{r}
#| label: setup

library(ggplot2)

theme_masa <- function(...) {
  theme_grey(...) %+replace%
    theme(
      text = element_text(family = "Marianne"))
}
```


# Objectifs



# Introduction

## Quarto

Un système de publication 

:::: {.columns}

::: {.column width="40%"}
- [multi-format](https://quarto.org/docs/gallery/)
  - HTML (rapports, livres, présentations)
  - PDF
  - Appli web (statique/Shiny) : blog, site, tableau de bord
  - MS Word
:::

::: {.column width="60%"}
- multi-langage
  - R
  - Python
  - [Observable](https://observablehq.com/)
  - [Julia](https://julialang.org/)
:::

::: notes
PDF nécessite {tinytex}
:::

::::

----

![Principe de fonctionnement (source RStudio)](img/rstudio-qmd-how-it-works.png){#fig-works}

::: notes
Mélange code et texte
Successeur de Rmarkdown

Latex ou Typst pour le PDF
:::

## Avantages

- intégration avec R
- reproductibilité
- versionnement avec git

::: notes
afficher du code dans le doc
éviter les copier/coller : synchronisation analyse/résultats
:::

## Inconvénients

- syntaxe (markdown)
- génération

::: notes
éditeur visuel WYSIWYG
:::

## Sur CERISE

Un package et un binaire

`quarto check install`  
`quarto check knitr`

# Syntaxe et structure

````
---
title: "Mon document"
author: ""
---

Lorem ipsum *dolor* sit amet, consectetur adipiscing elit,

```{{python}}
1 + 1
```

```{{r}}
a <- 1 + 1
```

sed do `{{r}} a` eiusmod **tempor** incididunt ut labore et dolore magna aliqua

````

## markdown

Un langage balisé simple

[doc](https://quarto.org/docs/authoring/markdown-basics.html)

## chunks

```{{r}}
#| label: mon-chunk
#| warning: false

1+1
```

## YAML

En-tête de configuration


::: {.callout-note}
### À vous de jouer

[Exercice 1](exercices/exercices_enonces_quarto.html#doc-simple) : produire un document simple
:::




## Éléments

### Texte

- 2 retours à la ligne pour faire un paragraphe
- `*` ou `_` pour mettre en *\*italique\** ou en **\*\*gras\*\***.
- `[un lien](https://www.example.org/)` → [un lien](https://www.example.org/)




### Titres

Préfixer le titre avec `#`, `##` ou `###` pour avoir les titres de niveau 1, 2 ou 3, *etc.*.

`#### Titre de niveau 4`

#### Titre de niveau 4


### Listes



### Liens


### Images

`![MASA](img/logo_masa_mail.png)`  

![MASA](img/logo_masa_mail.png "voir le logo"){fig-alt="Logo MASA" width="215px"}

`![MASA](img/logo_masa_mail.png "voir le logo"){fig-alt="Logo MASA"}`



### Renvois

Numérotation automatique


### Code

```{r}
#| label: fig-iris
#| fig-cap: "Iris"
#| output-location: column

ggplot(iris, aes(Petal.Length, 
                 Petal.Width, 
                 color = Species)) +
  geom_point() +
  theme_masa()
```

- Taille d'image dans Quarto [@arel-bundockConsistentFiguresQuarto2024]



### Tableaux


### Notes de pied de page

````
Les notes se construisent en ajoutant un `[^1]` dans le texte, avec le `1` 
pouvant être une numérotation (pas obligatoirement dans l'ordre) ou tout 
autre mot clé. La note est ensuite introduite avec le même symbols dans un 
nouveau paragraphe

[^1]: texte de la note

````

C'est normalement facile[^nbp] à faire si on se rappelle de la syntaxe.

[^nbp]: [page d'aide](https://quarto.org/docs/authoring/markdown-basics.html#footnotes) sur les notes de bas de page.

### Graphiques



### Cartes



### Équations

Syntaxe Latex entre des `$` (inline) ou `$$` (bloc).

```latex
$\sigma = \sqrt{\frac{1}{N} \sum_{i=1}^N (x_i - \mu)^2},\text{ où } \mu = \frac{1}{N} \sum_{i=1}^N x_i$
```

$$\sigma = \sqrt{\frac{1}{N} \sum_{i=1}^N (x_i - \mu)^2},\text{ où } \mu = \frac{1}{N} \sum_{i=1}^N x_i$$

### Citations/bibliographie

Avec [Zotero](https://www.zotero.org/) et l'extension [Better BibTeX](https://retorque.re/zotero-better-bibtex/) pour auto-exporter en BibTeX la collection quand elle est modifiée.

Préciser le fichier utilisé en en-tête, puis utilisation des identifiants du fichier BibTex.

````
---
title: "Mon document"
bibliography: formation_quarto.bib
---

Comme le dit @rdevelopmentcoreteamLanguageEnvironmentStatistical2010 :

> Lorem ipsum dolor sit amet[@rstudioGuide2024], consectetur adipiscing elit

````

Comme le dit @rdevelopmentcoreteamLanguageEnvironmentStatistical2010 :

> Lorem ipsum dolor sit amet[@rstudioGuide2024], consectetur adipiscing elit


### Callout

````
:::{.callout-note}
Il existe cinq types de : 
`note`, `tip`, `warning`, `caution` et `important`.
:::
````

:::{.callout-note}
Il existe cinq types de : 
`note`, `tip`, `warning`, `caution` et `important`.
:::

## Cache

# Marque de l'État

## Typographie Marianne

Pour textes et graphiques [@servicedinformationdugouvernementCharteGraphiqueLEtat2020]
  
- Installer {ragg}, {systemfonts} et {textshaping}
- Dans l'en-tête yaml du document Quarto :
  
  ```
  ---
  mainfont: Marianne
  knitr:
    opts_chunk: 
      dev: "ragg_png"
  ---
  ```
  
::: notes
Permet d'avoir la police Marianne pour le texte et de la prendre en compte dans les graphiques ggplot.

Autre option (à mettre dans un chunk de configuration en début de document) :
  `knitr::opts_chunk$set(dev = "ragg_png")`
:::

## Couleurs

# Références

